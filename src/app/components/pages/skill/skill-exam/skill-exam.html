<div class="exam-container">
  <h2>Экзамен по навыку</h2>

  <!-- Выбор активной сессии -->
  <div class="form-group">
    <label for="session">Сессия:</label>
    <ng-container *ngIf="activeSessionList.length === 1; else multipleSessions">
      <p>Сессия №{{ activeSessionList[0].id }}</p>
    </ng-container>

    <ng-template #multipleSessions>
      <select
        id="session"
        [(ngModel)]="currentSessionId"
        (change)="onSessionChange()"
        required
        class="form-control"
      >
        <option [ngValue]="undefined" disabled>Выберите сессию</option>
        <option
          *ngFor="let session of activeSessionList"
          [ngValue]="session.id"
        >
          Сессия №{{ session.id }}
        </option>
      </select>
    </ng-template>
  </div>

  <!-- Выбор студента -->
  <div class="form-group">
    <label for="student">Студент:</label>
    <select
      id="student"
      [(ngModel)]="currentStudentId"
      required
      class="form-control"
    >
      <option [ngValue]="undefined" disabled>Выберите студента</option>
      <option *ngFor="let student of studentIds" [ngValue]="student">
        Студент №{{ student }}
      </option>
    </select>
  </div>

  <!-- Оценка шагов навыка -->
  <div class="steps-section">
    <h3>Шаги навыка</h3>
    <div *ngFor="let step of skillSteps; let i = index" class="step-item">
      <label>
        {{ step.name }}
        <select [(ngModel)]="stepScores[i]" class="form-control" required>
          <option [ngValue]="0">0</option>
          <option [ngValue]="1">1</option>
          <option [ngValue]="2">2</option>
        </select>
      </label>
    </div>
  </div>

  <!-- Ошибки -->
  <div class="errors-section">
    <label>
      Грубые ошибки:
      <input
        type="number"
        [(ngModel)]="grossErrors"
        min="0"
        max="100"
        class="form-control"
        required
      />
    </label>

    <label>
      Мелкие ошибки:
      <input
        type="number"
        [(ngModel)]="minorErrors"
        min="0"
        max="100"
        class="form-control"
        required
      />
    </label>
  </div>

  <!-- Кнопка отправки -->
  <button (click)="submitExam()" [disabled]="!canSubmit()" class="btn-submit">
    Отправить
  </button>
</div>
